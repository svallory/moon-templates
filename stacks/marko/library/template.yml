# https://moonrepo.dev/docs/config/template
# $schema: 'https://moonrepo.dev/schemas/template.json'

id: marko.library
# REQUIRED: Name of the template in a human readable format.
title: "App: library"

# REQUIRED: Description of what the template is for and other relevant information.
description: "Create a Marko library project"

extends:
  # Adds the ability to debug the code generation
  # When `debug` is set to true, a `__generation-info-[template.id].json` file
  # is generated at the root of DEST
  - "__utils.debug"
  - "__utils.macros"

variables:
  # The template path relative to base-dir
  # This variable can be used to determine the template being executed
  # It is useful for nesting templates like in toolchains and toolchains/typescript
  __template:
    type: string
    default: apps/marko/library

  # An id to identify this template
  # This variable can be used to determine the template being executed
  # It is useful for nesting templates like in toolchains and toolchains/typescript
  __template_id:
    type: string
    default: apps/marko/library

  # Replace all files without asking for permission
  __replace_all:
    type: boolean
    default: false

  $hooks:
    type: string
    internal: true
    default: |
      prepare:
        command: echo "Preparing to run template"

      start:
        script: |
          echo "[hook] Starting generation with the variables:"
          variables()

      beforeFIle:
        script: |
          echo "[hook] beforeFile: $FILE"

      afterFile:
        script: |
          echo "[hook] afterFile: $FILE"

      finish:
        command: echo "Enjoy your free code :)"